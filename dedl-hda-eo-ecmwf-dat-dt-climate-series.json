{"version":2,"kind":"Notebook","sha256":"e43923a640bf0022efd5adf7375b9ff5cf8e6cee261c572ad0c80069197bae80","slug":"dedl-hda-eo-ecmwf-dat-dt-climate-series","location":"/HDA/DestinE_Digital_Twins/DEDL-HDA-EO.ECMWF.DAT.DT_CLIMATE-Series.ipynb","dependencies":[],"frontmatter":{"title":"Destination Earth - Climate Change Adaptation Digital Twin Series Plot- Data Access using DEDL HDA","content_includes_title":true,"kernelspec":{"name":"python_dedl","display_name":"Python DEDL","language":"python"},"numbering":{"title":{"offset":2}},"thumbnail":"/build/b27bd30f978ddf0848f3ea0942070886.jpeg","exports":[{"format":"ipynb","filename":"DEDL-HDA-EO.ECMWF.DAT.DT_CLIMATE-Series.ipynb","url":"/build/DEDL-HDA-EO.ECMWF.DA-18c681c8d98ff15c087413e5c8c9427b.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"image","url":"/build/b27bd30f978ddf0848f3ea0942070886.jpeg","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"RTfq46qoG4","urlSource":"https://github.com/destination-earth/DestinE-DataLake-Lab/blob/main/img/DestinE-banner.jpg?raw=true"}],"visibility":"show","key":"e6ZuOxyZr1"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Author","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"e4O8j5iw2B"}],"key":"hPBrBTwPpx"},{"type":"text","value":": EUMETSAT ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"IieYt0Kii8"},{"type":"break","key":"CQ3Xjt146C"},{"type":"text","value":"\n","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"nunuR5Q6km"},{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Copyright","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"OXEu8G5vmz"}],"key":"yHHhC7BQx5"},{"type":"text","value":": 2024 EUMETSAT ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GCTbbGBm7A"},{"type":"break","key":"jH7jPO3Hh3"},{"type":"text","value":"\n","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cQISkWvWYX"},{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Licence","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cC1CwbPZcN"}],"key":"kkSybMmgWk"},{"type":"text","value":": MIT ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mR56r3pHK3"},{"type":"break","key":"Yt0bKlfTLX"}],"key":"BZ2zwsWUwm"},{"type":"heading","depth":1,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Destination Earth - Climate Change Adaptation Digital Twin Series Plot- Data Access using DEDL HDA","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"AT9injOGcA"}],"identifier":"destination-earth-climate-change-adaptation-digital-twin-series-plot-data-access-using-dedl-hda","label":"Destination Earth - Climate Change Adaptation Digital Twin Series Plot- Data Access using DEDL HDA","html_id":"destination-earth-climate-change-adaptation-digital-twin-series-plot-data-access-using-dedl-hda","implicit":true,"key":"TrlPDM8Qhd"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"link","url":"https://destine-data-lake-docs.data.destination-earth.eu/en/latest/dedl-discovery-and-data-access/Introduction-to-Discovery-and-Data-Access-services/Introduction-to-Discovery-and-Data-Access-services.html#hda-harmonised-data-access","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Documentation DestinE Data Lake HDA","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"o4TQE2CpMB"}],"urlSource":"https://destine-data-lake-docs.data.destination-earth.eu/en/latest/dedl-discovery-and-data-access/Introduction-to-Discovery-and-Data-Access-services/Introduction-to-Discovery-and-Data-Access-services.html#hda-harmonised-data-access","key":"MjD6KmG1qi"}],"key":"M8DJWDJBRb"},{"type":"paragraph","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"link","url":"https://confluence.ecmwf.int/display/DDCZ/Climate+DT+Phase+1+data+catalogue","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Climate DT data catalogue","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"FMZ7dCeTyw"}],"urlSource":"https://confluence.ecmwf.int/display/DDCZ/Climate+DT+Phase+1+data+catalogue","key":"J5W8gMTorS"}],"key":"DeRgU7Jsrk"}],"key":"VkT2QJEG6I"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"break","key":"KZZAuIWnYB"},{"type":"text","value":"Author: EUMETSAT","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rXQphAnnU9"}],"key":"OCZmN0QeK8"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Credit: Earthkit and HDA Polytope used in this context are both packages provided by the European Centre for Medium-Range Weather Forecasts (","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"OY6qn2OHM0"},{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"ECMWF","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"r861qM8Vb0"}],"key":"yFSPcmbmLN"},{"type":"text","value":").","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"DRBDQXrAxs"}],"key":"dPQeu8VBiO"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"DEDL Harmonised Data Access is used in this example.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"S3NSCMhUaA"}],"key":"tUV2LhCi8L"}],"key":"FMliCf68dD"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Obtain Authentication Token","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"oTWg1DNlPx"}],"identifier":"obtain-authentication-token","label":"Obtain Authentication Token","html_id":"obtain-authentication-token","implicit":true,"key":"GTV9Tdxgx0"}],"key":"Y6I8oh56ed"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"import requests\nfrom requests.adapters import HTTPAdapter\nfrom urllib3.util.retry import Retry\nimport json\nimport os\nfrom getpass import getpass\nimport destinelab as deauth","visibility":"show","key":"aqtl6lxv7z"},{"type":"output","id":"ai2G4WVCYYY_EhWDgMZzy","data":[],"visibility":"show","key":"hTKzZJKaWn"}],"visibility":"show","key":"ggMGS5HdgJ"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"First, we get an access token for the API","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"x4mbkrnaI8"}],"key":"IeXZ6pEJaf"}],"key":"ECR7TIdJWs"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"DESP_USERNAME = input(\"Please input your DESP username or email: \")\nDESP_PASSWORD = getpass(\"Please input your DESP password: \")\n\nauth = deauth.AuthHandler(DESP_USERNAME, DESP_PASSWORD)\naccess_token = auth.get_token()\nif access_token is not None:\n    print(\"DEDL/DESP Access Token Obtained Successfully\")\nelse:\n    print(\"Failed to Obtain DEDL/DESP Access Token\")\n\nauth_headers = {\"Authorization\": f\"Bearer {access_token}\"}","visibility":"show","key":"lmt9kwnrVi"},{"type":"output","id":"HNmzGfdGJAr6jdXJBaKHx","data":[{"name":"stdin","output_type":"stream","text":"Please input your DESP username or email:  eum-dedl-user\nPlease input your DESP password:  ········\n"},{"name":"stdout","output_type":"stream","text":"Response code: 200\nDEDL/DESP Access Token Obtained Successfully\n"}],"visibility":"show","key":"vKzTryR6lu"}],"visibility":"show","key":"GvJkSqLCvS"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Check if DT access is granted","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"eEODZO4kd0"}],"identifier":"check-if-dt-access-is-granted","label":"Check if DT access is granted","html_id":"check-if-dt-access-is-granted","implicit":true,"key":"lMKDi9v7GJ"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"If DT access is not granted, you will not be able to execute the rest of the notebook.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"B12nuqEakh"}],"key":"bO3FB2QzK3"}],"key":"AWJSlXEbsg"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"import importlib\ninstalled_version = importlib.metadata.version(\"destinelab\")\nversion_number = installed_version.split('.')[1]\nif((int(version_number) >= 8 and float(installed_version) < 1) or float(installed_version) >= 1):\n    auth.is_DTaccess_allowed(access_token)","visibility":"show","key":"gJZGu6U7Ka"},{"type":"output","id":"rZ5Hz2bsRXNNSFqsxSsZw","data":[{"name":"stdout","output_type":"stream","text":"DT Output access allowed\n"}],"visibility":"show","key":"V1A1GG5Hr1"}],"visibility":"show","key":"sKIna6PIiP"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Query using the DEDL HDA API","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qe4JwKAkdu"}],"identifier":"query-using-the-dedl-hda-api","label":"Query using the DEDL HDA API","html_id":"query-using-the-dedl-hda-api","implicit":true,"key":"epxMTkKP6u"}],"key":"Gzf0BEH7Qm"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Filter","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"eU1z0R8qgv"}],"identifier":"filter","label":"Filter","html_id":"filter","implicit":true,"key":"n6b6cmedcB"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"We have to setup up a filter and define which data to obtain.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"G9cVzo2Q8S"}],"key":"oxbTjIpV3z"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Choose a valid combination of => ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"FGCea9n6Le"},{"type":"strong","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Activity + Experiment + Model","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"oONAc5ffUl"}],"key":"aP33wD24xp"},{"type":"text","value":" (based on the year of interest)","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"FfEWzaJDKk"}],"key":"TfqWQrhrBh"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Following ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"PIrKClh4mK"},{"type":"strong","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"activities/experiment/model","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"bem65jduaX"}],"key":"x0JjJhka7E"},{"type":"text","value":" & dates are possible:","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"t6WY6E0cNH"}],"key":"OxHCAxrmPs"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"ScenarioMIP/ssp3-7.0/ICON: Start date 20200101, 40 years","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"R1ZACrpyR9"},{"type":"break","key":"uIGDlCdCk4"},{"type":"text","value":"\nScenarioMIP/ssp3-7.0/IFS-NEMO: Start date 20200101, 40 years","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"BFgFGHYdVI"},{"type":"break","key":"EFKEHyX8rB"}],"key":"n6h5LamEVa"}],"key":"rLUu9o0KZD"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"datechoice = \"2028-06-10T00:00:00Z\"\nfilters = {\n    key: {\"eq\": value}\n    for key, value in {\n        \"class\": \"d1\",             # fixed \n        \"dataset\": \"climate-dt\",   # fixed climate-dt access\n        \"activity\": \"ScenarioMIP\", # activity + experiment + model (go together)\n        \"experiment\": \"SSP3-7.0\",  # activity + experiment + model (go together)\n        \"model\": \"IFS-NEMO\",       # activity + experiment + model (go together)\n        \"generation\": \"1\",         # fixed Specifies the generation of the dataset, which can be incremented as required (latest is 1)\n        \"realization\": \"1\",        # fixed Specifies the climate realization. Default 1. Based on perturbations of initial conditions\n        \"resolution\": \"high\",      # standard/ high \n        \"expver\": \"0001\",          # fixed experiment version \n        \"stream\": \"clte\",          # fixed climate\n        \"time\": \"0000\",            # choose the hourly slot(s)\n        \"type\": \"fc\",              # fixed forecasted fields\n        \"levtype\": \"sfc\",          # Surface fields (levtype=sfc), Height level fields (levtype=hl), Pressure level fields (levtype=pl), Model Level (Levtype=ml)\n#        \"levelist\": \"1/2/3/...\",  # for ml/pl/sol type data\n        \"param\": \"167\"             # 2m Temperature parameter\n    }.items()\n}","visibility":"show","key":"cY4OAwjZ26"},{"type":"output","id":"BXALnf_n0GsNhD6Y_wE08","data":[],"visibility":"show","key":"V2pAHtWAQn"}],"visibility":"show","key":"idIoLH3qPL"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Make Data Request","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"l5JQfLM15D"}],"identifier":"make-data-request","label":"Make Data Request","html_id":"make-data-request","implicit":true,"key":"xG2VR49YLd"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"We request data, it is not available at the moment. We can see that our request is in ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"CtoKad8OyN"},{"type":"inlineCode","value":"queued","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"wI5FHuRm1x"},{"type":"text","value":"status.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"IwJC768lDD"},{"type":"break","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"OkiEVoBM1v"},{"type":"text","value":"We will poll the API until the data is ready and then download it.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"JZUHwsoUHr"}],"key":"BDtgKBMwDP"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"strong","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Please note that the basic HDA quota allows a maximum of 4 requests per second. The following code limits polling to this quota.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"ywIFOZQ4qZ"}],"key":"I7Sh5WGSo9"}],"key":"heZGjbtRxY"}],"visibility":"show","key":"CjjvMmv6lT"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"pip install ratelimit --quiet","visibility":"show","key":"UZIf9066bc"},{"type":"output","id":"TVXPCVeb5z21IhVe0W9rJ","data":[{"name":"stdout","output_type":"stream","text":"Note: you may need to restart the kernel to use updated packages.\n"}],"visibility":"show","key":"Wc8voto7NT"}],"visibility":"show","key":"D4BywVSy3J"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"from tqdm import tqdm\nimport time\nimport re\nfrom datetime import datetime\nfrom IPython.display import JSON\nfrom ratelimit import limits, sleep_and_retry\n\n\n#Sometimes requests to polytope get timeouts, it is then convenient define a retry strategy\n###\nretry_strategy = Retry(\n    total=5,  # Total number of retries\n    status_forcelist=[500, 502, 503, 504],  # List of 5xx status codes to retry on\n    allowed_methods=[\"GET\",'POST'],  # Methods to retry\n    backoff_factor=1  # Wait time between retries (exponential backoff)\n)\n\n# Create an adapter with the retry strategy\nadapter = HTTPAdapter(max_retries=retry_strategy)\n\n# Create a session and mount the adapter\nsession = requests.Session()\nsession.mount(\"https://\", adapter)\n\n\n# Set limit: max 4 calls per 1 seconds\n###\nCALLS = 4\nPERIOD = 1  # seconds\n@sleep_and_retry\n@limits(calls=CALLS, period=PERIOD)\ndef call_api(url,auth_headers):\n    response = session.get(url, headers=auth_headers, stream=True)\n    return response\n\n# Define date choice and filters if needed\ndatechoice = \"2024-07-01\"\n\n# Initialize a list to store filenames\nfilenames = []\n\n# Define start and end years\nstart_year = 2024\nstart_month = 7\nend_year = 2028\n\n# Loop \nfor year in range(start_year, end_year + 1):\n    # Create a datetime object \n    obsdate = datetime(year, start_month, 1)\n    datechoice = obsdate.strftime(\"%Y-%m-%dT12:00:00Z\")\n    response = session.post(\"https://hda.data.destination-earth.eu/stac/search\", headers=auth_headers, json={\n        \"collections\": [\"EO.ECMWF.DAT.DT_CLIMATE_ADAPTATION\"],\n        \"datetime\": datechoice,\n        \"query\": filters\n    })\n\n    # Requests to EO.ECMWF.DAT.DT_CLIMATE always return a single item containing all the requested data\n    # print(response.json())\n    product = response.json()[\"features\"][0]\n\n    # DownloadLink is an asset representing the whole product\n    download_url = product[\"assets\"][\"downloadLink\"][\"href\"]\n    print(download_url)\n    HTTP_SUCCESS_CODE = 200\n    HTTP_ACCEPTED_CODE = 202\n\n    direct_download_url = ''\n\n    response =session.get(download_url, headers=auth_headers)\n    response.raise_for_status()\n    if (response.status_code == HTTP_SUCCESS_CODE):\n        direct_download_url = product['assets']['downloadLink']['href']\n    elif (response.status_code != HTTP_ACCEPTED_CODE):\n        JSON(response.json(), expanded=True)\n\n    # we poll as long as the data is not ready\n    if direct_download_url=='':\n        while url := response.headers.get(\"Location\"):\n            print(f\"order status: {response.json()['status']}\")\n            response = call_api(url,auth_headers)  \n            response.raise_for_status()\n            \n            \n    # Check if Content-Disposition header is present\n    if \"Content-Disposition\" not in response.headers:\n        print(response)\n        print(response.json())\n        raise Exception(\"Headers: \\n\"+str(response.headers)+\"\\nContent-Disposition header not found in response. Must be something wrong.\")\n    filename = re.findall('filename=\\\"?(.+)\\\"?', response.headers[\"Content-Disposition\"])[0]\n    total_size = int(response.headers.get(\"content-length\", 0))\n\n    print(f\"downloading {filename}\")\n\n    with tqdm(total=total_size, unit=\"B\", unit_scale=True) as progress_bar:\n        with open(filename, 'wb') as f:\n            for data in response.iter_content(1024):\n                progress_bar.update(len(data))\n                f.write(data)\n    \n    # Add the filename to the list\n    filenames.append(filename)\n\n\n    \n    ","visibility":"show","key":"bwbyRJjuPm"},{"type":"output","id":"rVDhxZjBYAQqMQ-0PEWPL","data":[{"name":"stdout","output_type":"stream","text":"https://hda.data.destination-earth.eu/stac/collections/EO.ECMWF.DAT.DT_CLIMATE_ADAPTATION/items/DT_CLIMATE_ADAPTATION_20240701_20240701_ec9a796494eb745d6c6ddd684e5438778e13eb02/download?provider=dedt_lumi&_dc_qs=%257B%2522activity%2522%253A%2B%2522ScenarioMIP%2522%252C%2B%2522class%2522%253A%2B%2522d1%2522%252C%2B%2522dataset%2522%253A%2B%2522climate-dt%2522%252C%2B%2522date%2522%253A%2B%252220240701%252Fto%252F20240701%2522%252C%2B%2522experiment%2522%253A%2B%2522SSP3-7.0%2522%252C%2B%2522expver%2522%253A%2B%25220001%2522%252C%2B%2522generation%2522%253A%2B%25221%2522%252C%2B%2522levtype%2522%253A%2B%2522sfc%2522%252C%2B%2522model%2522%253A%2B%2522IFS-NEMO%2522%252C%2B%2522param%2522%253A%2B%2522167%2522%252C%2B%2522realization%2522%253A%2B%25221%2522%252C%2B%2522resolution%2522%253A%2B%2522high%2522%252C%2B%2522stream%2522%253A%2B%2522clte%2522%252C%2B%2522time%2522%253A%2B%25220000%2522%252C%2B%2522type%2522%253A%2B%2522fc%2522%257D\norder status: queued\norder status: queued\norder status: processing\norder status: processing\norder status: processing\norder status: processing\norder status: processing\norder status: processing\norder status: processing\ndownloading 8bf16f4e-a6e8-49ce-bc19-817daece6981.grib\n"},{"name":"stderr","output_type":"stream","text":"100%|██████████| 26.2M/26.2M [00:00<00:00, 49.8MB/s]\n"},{"name":"stdout","output_type":"stream","text":"https://hda.data.destination-earth.eu/stac/collections/EO.ECMWF.DAT.DT_CLIMATE_ADAPTATION/items/DT_CLIMATE_ADAPTATION_20250701_20250701_a02882cb88731e129d9b867641a1530950b93f22/download?provider=dedt_lumi&_dc_qs=%257B%2522activity%2522%253A%2B%2522ScenarioMIP%2522%252C%2B%2522class%2522%253A%2B%2522d1%2522%252C%2B%2522dataset%2522%253A%2B%2522climate-dt%2522%252C%2B%2522date%2522%253A%2B%252220250701%252Fto%252F20250701%2522%252C%2B%2522experiment%2522%253A%2B%2522SSP3-7.0%2522%252C%2B%2522expver%2522%253A%2B%25220001%2522%252C%2B%2522generation%2522%253A%2B%25221%2522%252C%2B%2522levtype%2522%253A%2B%2522sfc%2522%252C%2B%2522model%2522%253A%2B%2522IFS-NEMO%2522%252C%2B%2522param%2522%253A%2B%2522167%2522%252C%2B%2522realization%2522%253A%2B%25221%2522%252C%2B%2522resolution%2522%253A%2B%2522high%2522%252C%2B%2522stream%2522%253A%2B%2522clte%2522%252C%2B%2522time%2522%253A%2B%25220000%2522%252C%2B%2522type%2522%253A%2B%2522fc%2522%257D\norder status: queued\norder status: queued\norder status: processing\norder status: processing\norder status: processing\norder status: processing\norder status: processing\norder status: processing\norder status: processing\ndownloading 50e3b5aa-4889-4236-a55e-5a7f5e6a9137.grib\n"},{"name":"stderr","output_type":"stream","text":"100%|██████████| 24.6M/24.6M [00:00<00:00, 53.1MB/s]\n"},{"name":"stdout","output_type":"stream","text":"https://hda.data.destination-earth.eu/stac/collections/EO.ECMWF.DAT.DT_CLIMATE_ADAPTATION/items/DT_CLIMATE_ADAPTATION_20260701_20260701_e999192b403bd78d714acd0fa0ed83cd6392d6a4/download?provider=dedt_lumi&_dc_qs=%257B%2522activity%2522%253A%2B%2522ScenarioMIP%2522%252C%2B%2522class%2522%253A%2B%2522d1%2522%252C%2B%2522dataset%2522%253A%2B%2522climate-dt%2522%252C%2B%2522date%2522%253A%2B%252220260701%252Fto%252F20260701%2522%252C%2B%2522experiment%2522%253A%2B%2522SSP3-7.0%2522%252C%2B%2522expver%2522%253A%2B%25220001%2522%252C%2B%2522generation%2522%253A%2B%25221%2522%252C%2B%2522levtype%2522%253A%2B%2522sfc%2522%252C%2B%2522model%2522%253A%2B%2522IFS-NEMO%2522%252C%2B%2522param%2522%253A%2B%2522167%2522%252C%2B%2522realization%2522%253A%2B%25221%2522%252C%2B%2522resolution%2522%253A%2B%2522high%2522%252C%2B%2522stream%2522%253A%2B%2522clte%2522%252C%2B%2522time%2522%253A%2B%25220000%2522%252C%2B%2522type%2522%253A%2B%2522fc%2522%257D\norder status: queued\norder status: queued\norder status: processing\norder status: processing\norder status: processing\norder status: processing\norder status: processing\norder status: processing\ndownloading 1c596b44-eb38-4ff9-8ed2-fa34753935b3.grib\n"},{"name":"stderr","output_type":"stream","text":"100%|██████████| 26.2M/26.2M [00:00<00:00, 55.1MB/s]\n"},{"name":"stdout","output_type":"stream","text":"https://hda.data.destination-earth.eu/stac/collections/EO.ECMWF.DAT.DT_CLIMATE_ADAPTATION/items/DT_CLIMATE_ADAPTATION_20270701_20270701_949418df1ab80ec427f06fa759a8940dde2d6ee7/download?provider=dedt_lumi&_dc_qs=%257B%2522activity%2522%253A%2B%2522ScenarioMIP%2522%252C%2B%2522class%2522%253A%2B%2522d1%2522%252C%2B%2522dataset%2522%253A%2B%2522climate-dt%2522%252C%2B%2522date%2522%253A%2B%252220270701%252Fto%252F20270701%2522%252C%2B%2522experiment%2522%253A%2B%2522SSP3-7.0%2522%252C%2B%2522expver%2522%253A%2B%25220001%2522%252C%2B%2522generation%2522%253A%2B%25221%2522%252C%2B%2522levtype%2522%253A%2B%2522sfc%2522%252C%2B%2522model%2522%253A%2B%2522IFS-NEMO%2522%252C%2B%2522param%2522%253A%2B%2522167%2522%252C%2B%2522realization%2522%253A%2B%25221%2522%252C%2B%2522resolution%2522%253A%2B%2522high%2522%252C%2B%2522stream%2522%253A%2B%2522clte%2522%252C%2B%2522time%2522%253A%2B%25220000%2522%252C%2B%2522type%2522%253A%2B%2522fc%2522%257D\norder status: queued\norder status: queued\norder status: queued\norder status: processing\norder status: processing\norder status: processing\norder status: processing\norder status: processing\norder status: processing\ndownloading 4254a2e5-b002-42f5-8b13-5ad1da886412.grib\n"},{"name":"stderr","output_type":"stream","text":"100%|██████████| 26.2M/26.2M [00:00<00:00, 47.5MB/s]\n"},{"name":"stdout","output_type":"stream","text":"https://hda.data.destination-earth.eu/stac/collections/EO.ECMWF.DAT.DT_CLIMATE_ADAPTATION/items/DT_CLIMATE_ADAPTATION_20280701_20280701_686ac060140c939aed16cb1c87cd6e8ae6280b9d/download?provider=dedt_lumi&_dc_qs=%257B%2522activity%2522%253A%2B%2522ScenarioMIP%2522%252C%2B%2522class%2522%253A%2B%2522d1%2522%252C%2B%2522dataset%2522%253A%2B%2522climate-dt%2522%252C%2B%2522date%2522%253A%2B%252220280701%252Fto%252F20280701%2522%252C%2B%2522experiment%2522%253A%2B%2522SSP3-7.0%2522%252C%2B%2522expver%2522%253A%2B%25220001%2522%252C%2B%2522generation%2522%253A%2B%25221%2522%252C%2B%2522levtype%2522%253A%2B%2522sfc%2522%252C%2B%2522model%2522%253A%2B%2522IFS-NEMO%2522%252C%2B%2522param%2522%253A%2B%2522167%2522%252C%2B%2522realization%2522%253A%2B%25221%2522%252C%2B%2522resolution%2522%253A%2B%2522high%2522%252C%2B%2522stream%2522%253A%2B%2522clte%2522%252C%2B%2522time%2522%253A%2B%25220000%2522%252C%2B%2522type%2522%253A%2B%2522fc%2522%257D\norder status: queued\norder status: queued\norder status: processing\norder status: processing\norder status: processing\norder status: processing\norder status: processing\norder status: processing\ndownloading 2c7595df-a665-46ac-967a-391be6100490.grib\n"},{"name":"stderr","output_type":"stream","text":"100%|██████████| 26.3M/26.3M [00:00<00:00, 48.3MB/s]\n"}],"visibility":"show","key":"r0aNiWAR6M"}],"visibility":"show","key":"rTrX3MXfVm"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"EarthKit","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"evUdXSAJbR"}],"identifier":"earthkit","label":"EarthKit","html_id":"earthkit","implicit":true,"key":"wKK8ZUpb8r"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Lets plot the result file\n[EarthKit Documentation] ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"gvuzOM6V8y"},{"type":"link","url":"https://earthkit-data.readthedocs.io/en/latest/index.html","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"https://​earthkit​-data​.readthedocs​.io​/en​/latest​/index​.html","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Jsi9YaYdiN"}],"urlSource":"https://earthkit-data.readthedocs.io/en/latest/index.html","key":"anJMsSa9R0"}],"key":"OAbzoZNoOS"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"This section requires that you have ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"ieUGLJ5j84"},{"type":"inlineCode","value":"ecCodes >= 2.35","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"sLNiBldP8l"},{"type":"text","value":" installed on your system.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"g1dK8A70ei"},{"type":"break","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"OF537fj4VB"},{"type":"text","value":"You can follow the installation procedure at ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"bbpmqVPZNE"},{"type":"link","url":"https://confluence.ecmwf.int/display/ECC/ecCodes+installation","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"https://​confluence​.ecmwf​.int​/display​/ECC​/ecCodes+installation","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"fKrLCjfaFT"}],"urlSource":"https://confluence.ecmwf.int/display/ECC/ecCodes+installation","key":"Rkicblszl3"}],"key":"uDCHjxgfUn"}],"key":"YRTVWoClty"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"import earthkit.data\nimport earthkit.maps\nimport earthkit.regrid","visibility":"show","key":"R40B1tKKim"},{"type":"output","id":"LfwuHdgnc_4cn8R57BUfk","data":[],"visibility":"show","key":"ToRzKsRi2R"}],"visibility":"show","key":"PvfrrAkN4U"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Iterate over filenames\nfor filename in filenames:\n    print(filename)  # For example, print each filename\n    data = earthkit.data.from_source(\"file\", filename)\n    data.ls\n    earthkit.maps.quickplot(data,#style=style\n                       )\n","visibility":"show","key":"BfiDAjm54m"},{"type":"output","id":"2vsj6V1AVoNf7Y74THPMB","data":[{"name":"stdout","output_type":"stream","text":"8bf16f4e-a6e8-49ce-bc19-817daece6981.grib\n"},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"6024322af746fc8e9d305001feb66654","path":"/build/6024322af746fc8e9d305001feb66654.png"},"text/plain":{"content":"<Figure size 900x750 with 2 Axes>","content_type":"text/plain"}}},{"name":"stdout","output_type":"stream","text":"50e3b5aa-4889-4236-a55e-5a7f5e6a9137.grib\n"},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"ca23ec0e8ac256ab047cc97ee0aee46b","path":"/build/ca23ec0e8ac256ab047cc97ee0aee46b.png"},"text/plain":{"content":"<Figure size 900x750 with 2 Axes>","content_type":"text/plain"}}},{"name":"stdout","output_type":"stream","text":"1c596b44-eb38-4ff9-8ed2-fa34753935b3.grib\n"},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"0fe1c50e5b2469abc5f0a115142e3c3f","path":"/build/0fe1c50e5b2469abc5f0a115142e3c3f.png"},"text/plain":{"content":"<Figure size 900x750 with 2 Axes>","content_type":"text/plain"}}},{"name":"stdout","output_type":"stream","text":"4254a2e5-b002-42f5-8b13-5ad1da886412.grib\n"},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"8b22440df34a68ec3ca0a2897388188d","path":"/build/8b22440df34a68ec3ca0a2897388188d.png"},"text/plain":{"content":"<Figure size 900x750 with 2 Axes>","content_type":"text/plain"}}},{"name":"stdout","output_type":"stream","text":"2c7595df-a665-46ac-967a-391be6100490.grib\n"},{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"db7db8ce70ebfd01aac2a1d88ba3cede","path":"/build/db7db8ce70ebfd01aac2a1d88ba3cede.png"},"text/plain":{"content":"<Figure size 900x750 with 2 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"IxkArnr123"}],"visibility":"show","key":"vt8NaBOgMB"}],"key":"My6qOUK9Mt"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"DEDL - HDA Extreme DT Parameter Plotter - Tutorial","url":"/extremedt-parameterplotter","group":"HDA"},"next":{"title":"Destination Earth - Weather-Induced Extremes Digital Twin - Data Access using DEDL HDA","url":"/dedl-hda-eo-ecmwf-dat-dt-extremes-series","group":"HDA"}}},"domain":"http://localhost:3001"}