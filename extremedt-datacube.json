{"version":2,"kind":"Notebook","sha256":"bb90703121ff6f693d48ed8f1dc9a2dfae540ec12787b592c28b2eae0a1d16ec","slug":"extremedt-datacube","location":"/STACK/ExtremeDT-DataCube.ipynb","dependencies":[],"frontmatter":{"title":"Data Cube populated with data obtained from Weather and Geophysical Extremes Digital Twin (DT) - ExtremeDT","content_includes_title":true,"kernelspec":{"name":"python_dedl","display_name":"Python DEDL","language":"python"},"numbering":{"title":{"offset":2}},"thumbnail":"/build/b27bd30f978ddf0848f3ea0942070886.jpeg","exports":[{"format":"ipynb","filename":"ExtremeDT-DataCube.ipynb","url":"/build/ExtremeDT-DataCube-da1fce9e0d96a43c8cb45217920abf60.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"image","url":"/build/b27bd30f978ddf0848f3ea0942070886.jpeg","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GNVVo0J2Lx","urlSource":"https://github.com/destination-earth/DestinE-DataLake-Lab/blob/main/img/DestinE-banner.jpg?raw=true"}],"key":"EtbyngKc5e"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Licence","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TcJugiYBkd"}],"key":"SLPRAZigex"},{"type":"text","value":": MIT ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HZVRLdsrgc"},{"type":"break","key":"Hv5tES2Oqc"}],"key":"lRfupECfIW"},{"type":"heading","depth":1,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Data Cube populated with data obtained from Weather and Geophysical Extremes Digital Twin (DT) - ExtremeDT","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"AGzlpy9ubV"}],"identifier":"data-cube-populated-with-data-obtained-from-weather-and-geophysical-extremes-digital-twin-dt-extremedt","label":"Data Cube populated with data obtained from Weather and Geophysical Extremes Digital Twin (DT) - ExtremeDT","html_id":"data-cube-populated-with-data-obtained-from-weather-and-geophysical-extremes-digital-twin-dt-extremedt","implicit":true,"key":"RfDNUr76U9"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"This notebook covers:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"YvGbmzc050"}],"key":"BGZvWaJMbu"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"find available data cubes and their urls","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"bBmMrftAAr"}],"key":"k5r3BzO9CU"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"upload data cube","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"Dk8wU0y8a4"}],"key":"m94iymF8XK"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"plot map for desired area, time and variable","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"WHzsGX0euu"}],"key":"oZBy4nHwuS"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"plot time series chart for selected variable in specifc time for specific location","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"rQ10va8gwi"}],"key":"neEfxnRBg8"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"create interactive dashboard using xcube - xviewer","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"x5rncZilep"}],"key":"VKqivz7ONv"}],"key":"WWrqEJ2Act"}],"key":"acZ7XqcidO"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Prepre your environment","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"aC3k1iHl8O"}],"identifier":"prepre-your-environment","label":"Prepre your environment","html_id":"prepre-your-environment","implicit":true,"key":"rRjFJbcrmK"}],"key":"V5j4XqAV7f"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"import xarray as xr\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport dask\nimport requests","visibility":"show","key":"LZEcPnuJcn"},{"type":"output","id":"sXu7S1061v2JIBEQlmg3B","data":[],"visibility":"show","key":"t0OKB1TNAM"}],"visibility":"show","key":"VmDShbtswk"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Connect with Extreme DT data cube","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Jib9gTNXYu"}],"identifier":"connect-with-extreme-dt-data-cube","label":"Connect with Extreme DT data cube","html_id":"connect-with-extreme-dt-data-cube","implicit":true,"key":"VtFy2mhiG2"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"strong","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"The data cube provides data:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"IJgs7IV3Ay"}],"key":"vqg1ok6D4S"}],"key":"o3EAMEXLcS"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Four variables","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"sH0jGoR1oM"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"2t - Air temperature at 2 meters above grond [K]","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"hypk22aQi9"}],"key":"H0Qol2vttt"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"2d - Dew point temperature at 2 meters above grond [K]","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"wOcJi397H8"}],"key":"u9Ogm6TiO3"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"sp - Surface pressure [Pa]","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"IX25ax83EZ"}],"key":"vvXFpXZiFY"}],"key":"whLPcp4Z6K"}],"key":"QBLPduRt1Y"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Forecast from 10.04.2024 + 96 hours","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"nWpT5dwEbz"}],"key":"XUmxYIo3Et"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Hourly step","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"cZ4awNPvej"}],"key":"T8uZUYhqoH"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"World","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"qsp1tHbPE3"}],"key":"w4IRILbgwY"}],"key":"HEm8IgrglS"}],"key":"yxpEfqI4hT"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Select proper data cube","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GM55comAn2"}],"identifier":"select-proper-data-cube","label":"Select proper data cube","html_id":"select-proper-data-cube","implicit":true,"key":"NvcEuX8u0S"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Data cubes on s3 bucket are stored under URL ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"ciQd9xHvFb"},{"type":"link","url":"https://s3.central.data.destination-earth.eu/swift/v1/dedl_datacube","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"https://​s3​.central​.data​.destination​-earth​.eu​/swift​/v1​/dedl​_datacube","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"GOEk0y6I9j"}],"urlSource":"https://s3.central.data.destination-earth.eu/swift/v1/dedl_datacube","key":"kYp94D2iq2"},{"type":"text","value":".","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"xsmi2qLh0x"},{"type":"break","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"IGj0lsTkwJ"},{"type":"text","value":"Data cubes are stored in two directories:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"orkRypJcyG"}],"key":"YwuwGZ8cPv"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"ExtremeDT - the newest one","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"pwUDPeEmlz"}],"key":"uryYdCfhZj"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"archive - from prievous days","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"nFJXAqVzCk"}],"key":"zkMhJ2ZAbw"}],"key":"BYE7ZeLv1k"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"strong","children":[{"type":"text","value":"File nameing convention:","key":"QF84WeMB3l"}],"key":"gNChRldXOf"},{"type":"break","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"TXFR5njoS0"},{"type":"text","value":"dt_extreme_YYYYMMDD.zarr/","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"nBNMnK9FUl"},{"type":"break","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"h0yCFsxJ7p"},{"type":"text","value":"YYYYMMDD - is the date when forecast starts (step 0)","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"ZNg8aeoGsN"}],"key":"uDbZCZbAsW"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"strong","children":[{"type":"text","value":"Results","key":"qyv8bAzfkZ"}],"key":"taPyNCi1bq"},{"type":"break","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"EArg8E7Uz5"},{"type":"text","value":"After exectution of code below, the list of urls linked to available cubes will be printed.","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"nsjVpT2pjJ"}],"key":"U0ncTqOC2q"}],"key":"HILEB5KOMm"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# URL to s3 where  ExtremeDT data cubes are stored\ndatacube_url = 'https://s3.central.data.destination-earth.eu/swift/v1/dedl_datacube'\nresponse = requests.get(datacube_url)\n\nif response.status_code == 200:\n    lines = response.text.splitlines()\n    zarr_items = [line for line in lines if line.endswith(\".zarr\") or line.endswith(\".zarr/\")]\n    if zarr_items:\n        for item in zarr_items:\n            print(item)\n            new_url = f\"{datacube_url}/{item}\"\n            print(\"New URL:\", new_url)\n    else:\n        print(\"No .zarr files or directories found.\")\nelse:\n    print(\"Failed to fetch contents. Status code:\", response.status_code)\n","visibility":"show","key":"obRbUauG4E"},{"type":"output","id":"KpnL6ytFJG1hAfyVgAtum","data":[{"name":"stdout","output_type":"stream","text":"ExtremeDT/dt_extreme_20240410.zarr/\nNew URL: https://s3.central.data.destination-earth.eu/swift/v1/dedl_datacube/ExtremeDT/dt_extreme_20240410.zarr/\narchive/dt_extreme_20240409.zarr/\nNew URL: https://s3.central.data.destination-earth.eu/swift/v1/dedl_datacube/archive/dt_extreme_20240409.zarr/\n"}],"visibility":"show","key":"R2JXWrjQbX"}],"visibility":"show","key":"tQUtRILhs4"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Get info about the newset data cube.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"AxZMtX6WOC"}],"key":"Sg0qa0AlMk"}],"key":"qNpGGv6ov5"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Paste into url variable link to the newest data cube\nurl = 'https://s3.central.data.destination-earth.eu/swift/v1/dedl_datacube/ExtremeDT/dt_extreme_20240410.zarr/'","visibility":"show","key":"C68QkwnJQ2"},{"type":"output","id":"gj7xnAsWBXGrjFd0ofdQt","data":[],"visibility":"show","key":"ZHBu7nkkXJ"}],"visibility":"show","key":"tzcLUoDMSx"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Let’s make some test","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"uTOwHQvWya"}],"identifier":"lets-make-some-test","label":"Let’s make some test","html_id":"lets-make-some-test","implicit":true,"key":"dkRquDpGJT"}],"key":"BoH33elVkN"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Area of interest","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"U0BjeYNWKy"}],"identifier":"area-of-interest","label":"Area of interest","html_id":"area-of-interest","implicit":true,"key":"Jr4TzU7qOZ"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Upload data for selected area and verify what variables are provided. In this case uplaod data for Africa. List of available variables should be returend.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"PvK4McoZgp"}],"key":"kL2xNS1ddO"}],"key":"X1ItwLWTL6"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"africa_bbox = [-20,     # West\n                -40,    # South\n                60,     # East\n                40]     #North\n\nafrica_dt = xr.open_zarr(url).sel(lon=slice(africa_bbox[0], \n                                            africa_bbox[2]), \n                                lat=slice(africa_bbox[3], \n                                            africa_bbox[1]),\n                                                         )\n\nlist(africa_dt.keys())","visibility":"show","key":"TDjnTCHs69"},{"type":"output","id":"egPkjTqTsEO9Zt1TpKg4b","data":[{"output_type":"execute_result","execution_count":4,"metadata":{},"data":{"text/plain":{"content":"['2d', '2t', 'sp']","content_type":"text/plain"}}}],"visibility":"show","key":"iincD1kaUx"}],"visibility":"show","key":"YPH0DkCtBi"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot map of air temperature for Africa.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"aTZ2mqKVNH"}],"key":"bXa9SFiCq1"}],"key":"DuQLL2e7E6"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"lon = africa_dt['lon']\nlat = africa_dt['lat']\ntemperature = africa_dt['2t'][0, 0] - 273.15 # Conversion to Celcius degrees\n\nplt.figure(figsize=(10, 6))\nplt.pcolormesh(lon, lat, temperature, cmap='coolwarm')\nplt.colorbar(label='Temperature (°C)')\nplt.title('Temperature Map')\nplt.xlabel('Longitude')\nplt.ylabel('Latitude')","visibility":"show","key":"NyqzDOhq5M"},{"type":"output","id":"EejDmbgZGtzgXDTQPNAwJ","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"25594f9b3cb66793800b1d9b0a416d34","path":"/build/25594f9b3cb66793800b1d9b0a416d34.png"},"text/plain":{"content":"<Figure size 1000x600 with 2 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"wwT5NdgJxt"}],"visibility":"show","key":"vAwAyli2Tj"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Get data for specific time range","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"e84QmnFasU"}],"identifier":"get-data-for-specific-time-range","label":"Get data for specific time range","html_id":"get-data-for-specific-time-range","implicit":true,"key":"lE130l6Lyu"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Get data from 10st of April to 11th of April.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"Oxfx36NE2U"}],"key":"ELRAE5gQP4"}],"key":"tCBAYZQFID"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"africa_bbox = [-20,     # West\n                -40,    # South\n                60,     # East\n                40]     #North\n\nafrica_dt = xr.open_zarr(url).sel(lon=slice(africa_bbox[0], \n                                            africa_bbox[2]), \n                                lat=slice(africa_bbox[3], \n                                            africa_bbox[1]),\n                                time=slice('20240410T000000', '20240411T000000')\n                                                         )\n\nprint(africa_dt.time)","visibility":"show","key":"DqGIynu2dt"},{"type":"output","id":"E-EqLfXcZoqE1HYmprNab","data":[{"name":"stdout","output_type":"stream","text":"<xarray.DataArray 'time' (time: 25)>\narray(['2024-04-10T00:00:00.000000000', '2024-04-10T01:00:00.000000000',\n       '2024-04-10T02:00:00.000000000', '2024-04-10T03:00:00.000000000',\n       '2024-04-10T04:00:00.000000000', '2024-04-10T05:00:00.000000000',\n       '2024-04-10T06:00:00.000000000', '2024-04-10T07:00:00.000000000',\n       '2024-04-10T08:00:00.000000000', '2024-04-10T09:00:00.000000000',\n       '2024-04-10T10:00:00.000000000', '2024-04-10T11:00:00.000000000',\n       '2024-04-10T12:00:00.000000000', '2024-04-10T13:00:00.000000000',\n       '2024-04-10T14:00:00.000000000', '2024-04-10T15:00:00.000000000',\n       '2024-04-10T16:00:00.000000000', '2024-04-10T17:00:00.000000000',\n       '2024-04-10T18:00:00.000000000', '2024-04-10T19:00:00.000000000',\n       '2024-04-10T20:00:00.000000000', '2024-04-10T21:00:00.000000000',\n       '2024-04-10T22:00:00.000000000', '2024-04-10T23:00:00.000000000',\n       '2024-04-11T00:00:00.000000000'], dtype='datetime64[ns]')\nCoordinates:\n  * time     (time) datetime64[ns] 2024-04-10 2024-04-10T01:00:00 ... 2024-04-11\nAttributes:\n    axis:           T\n    standard_name:  time\n"}],"visibility":"show","key":"XGDnvvt2BU"}],"visibility":"show","key":"JcVw5DByN7"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Obtain data for specific variable and time","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"X6bJ3BvR6T"}],"identifier":"obtain-data-for-specific-variable-and-time","label":"Obtain data for specific variable and time","html_id":"obtain-data-for-specific-variable-and-time","implicit":true,"key":"pfNXr9qyuu"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Obtain surface pressure data from 10th of April to 11th of April.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"UYJOXy7v45"}],"key":"RfxOa9NsqO"}],"key":"nNbi0EwF0u"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"africa_bbox = [-20,     # West\n                -40,    # South\n                60,     # East\n                40]     #North\n\nafrica_dt = xr.open_zarr(url)['sp'].sel(lon=slice(africa_bbox[0], \n                                            africa_bbox[2]), \n                                lat=slice(africa_bbox[3], \n                                            africa_bbox[1]),\n                                time=slice('20240410T000000', '20240411T000000')\n                                                         )\n\nprint(africa_dt.var)","visibility":"show","key":"PHygn43ore"},{"type":"output","id":"-BZHUcqf83qiJW1MY3wZf","data":[{"name":"stdout","output_type":"stream","text":"<bound method DataArrayAggregations.var of <xarray.DataArray 'sp' (time: 25, lat: 2276, lon: 2279)>\ndask.array<getitem, shape=(25, 2276, 2279), dtype=float32, chunksize=(25, 417, 837), chunktype=numpy.ndarray>\nCoordinates:\n  * lat      (lat) float64 39.99 39.95 39.92 39.88 ... -39.92 -39.95 -39.99\n  * lon      (lon) float64 -19.97 -19.94 -19.9 -19.87 ... 59.92 59.95 59.99\n  * time     (time) datetime64[ns] 2024-04-10 2024-04-10T01:00:00 ... 2024-04-11\nAttributes:\n    CDI_grid_num_LPE:  2560\n    CDI_grid_type:     gaussian\n    long_name:         Surface pressure\n    param:             0.3.0\n    standard_name:     surface_air_pressure\n    units:             Pa>\n"}],"visibility":"show","key":"ropxkiBOrT"}],"visibility":"show","key":"ghiEQFh2AX"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot map of surface pressure over Africa.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"nMqiSS8j7S"}],"key":"jsMNlSQ0Bn"}],"key":"mv4lIB1sQh"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"lon = africa_dt['lon']\nlat = africa_dt['lat']\ntemperature = africa_dt[0] / 100    # Conversion to hectoPascals\n\nplt.figure(figsize=(10, 6))\nplt.pcolormesh(lon, lat, temperature, cmap='viridis')\nplt.colorbar(label='Surface Pressure (hPa)')\nplt.title('Surface pressure Map')\nplt.xlabel('Longitude')\nplt.ylabel('Latitude')","visibility":"show","key":"sAdLO2cw6i"},{"type":"output","id":"kuFJwkh8XlwUE8moGLpmu","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"57d5b6f621ee4b704d66932aa12f16a7","path":"/build/57d5b6f621ee4b704d66932aa12f16a7.png"},"text/plain":{"content":"<Figure size 1000x600 with 2 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"yVY7OG5WJI"}],"visibility":"show","key":"efE4hu21t6"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Time series","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JfHStxyTw4"}],"identifier":"time-series","label":"Time series","html_id":"time-series","implicit":true,"key":"XHYLlgKFbd"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Verify if it is possible to create time series chart (for 96 hours) from DT output - air temperature over Nairobi.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"W217AXWerZ"}],"key":"hHMI4dAUhQ"}],"key":"kqYVajBG3I"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"africa_bbox = [-20,     # West\n                -40,    # South\n                60,     # East\n                40]     #North\n\nafrica_dt = xr.open_zarr(url).sel(lon=slice(africa_bbox[0], \n                                            africa_bbox[2]), \n                                lat=slice(africa_bbox[3], \n                                            africa_bbox[1]),\n                                )\n                                                    ","visibility":"show","key":"KpoFjE2WZO"},{"type":"output","id":"JTZHmiqQn-ROsgUavCPzg","data":[],"visibility":"show","key":"fp9YKUpnDv"}],"visibility":"show","key":"DMTADzy7TV"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Create a chart.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"q0JVh3yYDr"}],"key":"fC8GwxLVqw"}],"key":"EhUTCOBWvX"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Define Nairobi coordinates\nnairobi_lat = -1.286389\nnairobi_lon = 36.817223\n\nlat = africa_dt['lat']\nlon = africa_dt['lon']\nnearest_lat_idx = np.abs(lat - nairobi_lat).argmin()\nnearest_lon_idx = np.abs(lon - nairobi_lon).argmin()\n\ntemperature_nairobi = africa_dt['2t'][:, :, nearest_lat_idx, nearest_lon_idx] - 273.15\ntime_values = africa_dt.time.values\n\nplt.figure(figsize=(10, 6))\nplt.plot(time_values, temperature_nairobi, marker='o', color='b')\nplt.title('Air Temperature Time Series for Nairobi')\nplt.xlabel('Time')\nplt.ylabel('Temperature (°C)')\nplt.grid(True)\nplt.show()\n","visibility":"show","key":"GFThctnIS6"},{"type":"output","id":"lFk5sPhb1lEnTQy1l4nPP","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"b61bf0f02adcece2bde436c11b668e6a","path":"/build/b61bf0f02adcece2bde436c11b668e6a.png"},"text/plain":{"content":"<Figure size 1000x600 with 1 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"a2KImEFRGf"}],"visibility":"show","key":"zyrxnAmemT"}],"key":"kBsnq5w7Og"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"STACK service - Dask 101","url":"/stack-dask-101","group":"STACK"},"next":{"title":"Create a dashboard based on Data Cube populated with data obtained from Weather and Geophysical Extremes Digital Twin (DT) - ExtremeDT","url":"/extremedt-datacube-xviewer","group":"STACK"}}},"domain":"http://localhost:3001"}