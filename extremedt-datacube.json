{"version":2,"kind":"Notebook","sha256":"bb90703121ff6f693d48ed8f1dc9a2dfae540ec12787b592c28b2eae0a1d16ec","slug":"extremedt-datacube","location":"/STACK/ExtremeDT-DataCube.ipynb","dependencies":[],"frontmatter":{"title":"Data Cube populated with data obtained from Weather and Geophysical Extremes Digital Twin (DT) - ExtremeDT","content_includes_title":true,"kernelspec":{"name":"python_dedl","display_name":"Python DEDL","language":"python"},"numbering":{"title":{"offset":2}},"thumbnail":"/build/b27bd30f978ddf0848f3ea0942070886.jpeg","exports":[{"format":"ipynb","filename":"ExtremeDT-DataCube.ipynb","url":"/build/ExtremeDT-DataCube-10fda14d44a67045f4f37ab54dddc9e9.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"image","url":"/build/b27bd30f978ddf0848f3ea0942070886.jpeg","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"VAUGjpOHvu","urlSource":"https://github.com/destination-earth/DestinE-DataLake-Lab/blob/main/img/DestinE-banner.jpg?raw=true"}],"key":"cBmVyc6LaA"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Licence","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rkcx1onpNb"}],"key":"ucC90sOsvr"},{"type":"text","value":": MIT ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"u6rzC9CfWP"},{"type":"break","key":"ekP2OG2GD8"}],"key":"N69W13iwwA"},{"type":"heading","depth":1,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Data Cube populated with data obtained from Weather and Geophysical Extremes Digital Twin (DT) - ExtremeDT","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"POwq8uVZCH"}],"identifier":"data-cube-populated-with-data-obtained-from-weather-and-geophysical-extremes-digital-twin-dt-extremedt","label":"Data Cube populated with data obtained from Weather and Geophysical Extremes Digital Twin (DT) - ExtremeDT","html_id":"data-cube-populated-with-data-obtained-from-weather-and-geophysical-extremes-digital-twin-dt-extremedt","implicit":true,"key":"DVRDxst29m"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"This notebook covers:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"ohFo4l1A4N"}],"key":"mfaJU6rRCo"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"find available data cubes and their urls","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"Z3O3I6Vdt6"}],"key":"wF1U0wlHS8"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"upload data cube","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"PjlbVpMazH"}],"key":"hOOipOmdTS"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"plot map for desired area, time and variable","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"XseLEyCdne"}],"key":"L5cWO8eL2F"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"plot time series chart for selected variable in specifc time for specific location","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"YIhgdgRzV0"}],"key":"I1GvMgJDh7"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"create interactive dashboard using xcube - xviewer","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"kUnVjV6n80"}],"key":"nDnfXo3NU7"}],"key":"XOsyofqVIv"}],"key":"ABgufpIOYP"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Prepre your environment","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mOepjboQ7o"}],"identifier":"prepre-your-environment","label":"Prepre your environment","html_id":"prepre-your-environment","implicit":true,"key":"pi5wuc4b47"}],"key":"dTiXMCuHj4"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"import xarray as xr\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport dask\nimport requests","visibility":"show","key":"rYegcK98nn"},{"type":"output","id":"OHqjZeHmItLsODLY5FO1X","data":[],"visibility":"show","key":"mYkfA1AbQh"}],"visibility":"show","key":"XwX7KNC2np"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Connect with Extreme DT data cube","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"AJp3bprGLG"}],"identifier":"connect-with-extreme-dt-data-cube","label":"Connect with Extreme DT data cube","html_id":"connect-with-extreme-dt-data-cube","implicit":true,"key":"TlAGIaG5Kw"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"strong","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"The data cube provides data:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"A1k3nEMXue"}],"key":"qhe64SZrIL"}],"key":"kLv2tOrZx5"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Four variables","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"bemIdYV6kp"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"2t - Air temperature at 2 meters above grond [K]","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"Vw0WovWAuw"}],"key":"xCwCV2YmPA"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"2d - Dew point temperature at 2 meters above grond [K]","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"yUcAcS9jxK"}],"key":"XWdWoHUd2R"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"sp - Surface pressure [Pa]","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"TfMcjdxZDH"}],"key":"sALvCpQgIM"}],"key":"n5ezpI7vaE"}],"key":"nR5X9lstWk"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Forecast from 10.04.2024 + 96 hours","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"wBh6jNV25r"}],"key":"lZ8l3T9XNS"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Hourly step","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"AJhC2T0rQ6"}],"key":"AtDHvYl8t3"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"World","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"nmVEh45jTs"}],"key":"dKhG2187hs"}],"key":"H056K8WnRO"}],"key":"ezR6wataCE"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Select proper data cube","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"i4uMFidMho"}],"identifier":"select-proper-data-cube","label":"Select proper data cube","html_id":"select-proper-data-cube","implicit":true,"key":"t5LOzcLqn8"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Data cubes on s3 bucket are stored under URL ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"I7oNhmc2WA"},{"type":"link","url":"https://s3.central.data.destination-earth.eu/swift/v1/dedl_datacube","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"https://​s3​.central​.data​.destination​-earth​.eu​/swift​/v1​/dedl​_datacube","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"pbjQOvK62r"}],"urlSource":"https://s3.central.data.destination-earth.eu/swift/v1/dedl_datacube","key":"o5vmhuBZ1u"},{"type":"text","value":".","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"bXHsRv2xKT"},{"type":"break","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"Jp5TwtO4cm"},{"type":"text","value":"Data cubes are stored in two directories:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"K3Eq5v8eNN"}],"key":"gsLwXdpZMA"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"ExtremeDT - the newest one","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"oeVnIGEf3q"}],"key":"g2ytjTaVYk"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"archive - from prievous days","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"mPau74CXkC"}],"key":"hQi1tKKgdQ"}],"key":"wiHqioQ27R"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"strong","children":[{"type":"text","value":"File nameing convention:","key":"VPzwYSMt0n"}],"key":"QjHgHA4TaH"},{"type":"break","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"DqOW0N5A9u"},{"type":"text","value":"dt_extreme_YYYYMMDD.zarr/","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"M2Pp6ogwmh"},{"type":"break","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"zXDney2nmn"},{"type":"text","value":"YYYYMMDD - is the date when forecast starts (step 0)","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"nhbRFyC6QG"}],"key":"rDs0FQaXTM"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"strong","children":[{"type":"text","value":"Results","key":"I0fFAColhA"}],"key":"VOTQWbjkPg"},{"type":"break","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"Xr4k4O7sPt"},{"type":"text","value":"After exectution of code below, the list of urls linked to available cubes will be printed.","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"bMDSlLYRr4"}],"key":"EgvWFc8dn4"}],"key":"NZUxQ8QFlr"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# URL to s3 where  ExtremeDT data cubes are stored\ndatacube_url = 'https://s3.central.data.destination-earth.eu/swift/v1/dedl_datacube'\nresponse = requests.get(datacube_url)\n\nif response.status_code == 200:\n    lines = response.text.splitlines()\n    zarr_items = [line for line in lines if line.endswith(\".zarr\") or line.endswith(\".zarr/\")]\n    if zarr_items:\n        for item in zarr_items:\n            print(item)\n            new_url = f\"{datacube_url}/{item}\"\n            print(\"New URL:\", new_url)\n    else:\n        print(\"No .zarr files or directories found.\")\nelse:\n    print(\"Failed to fetch contents. Status code:\", response.status_code)\n","visibility":"show","key":"NMuhmGUgx4"},{"type":"output","id":"F8JYjzKuNAGY2KOP6HKKQ","data":[{"name":"stdout","output_type":"stream","text":"ExtremeDT/dt_extreme_20240410.zarr/\nNew URL: https://s3.central.data.destination-earth.eu/swift/v1/dedl_datacube/ExtremeDT/dt_extreme_20240410.zarr/\narchive/dt_extreme_20240409.zarr/\nNew URL: https://s3.central.data.destination-earth.eu/swift/v1/dedl_datacube/archive/dt_extreme_20240409.zarr/\n"}],"visibility":"show","key":"pI1lby1yQx"}],"visibility":"show","key":"ZRhofxikWS"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Get info about the newset data cube.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SOHjlzsuaW"}],"key":"lEnzqNe2Ig"}],"key":"Nhzg0tZ4IN"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Paste into url variable link to the newest data cube\nurl = 'https://s3.central.data.destination-earth.eu/swift/v1/dedl_datacube/ExtremeDT/dt_extreme_20240410.zarr/'","visibility":"show","key":"IcuTeuLJ7W"},{"type":"output","id":"8zu4J5pGewF5Lou2qhEd0","data":[],"visibility":"show","key":"CQpiG8CVq4"}],"visibility":"show","key":"SgK5ZQ3VWv"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Let’s make some test","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dBURFus4Yn"}],"identifier":"lets-make-some-test","label":"Let’s make some test","html_id":"lets-make-some-test","implicit":true,"key":"HXgpuUsZ6O"}],"key":"SYk1HIFk1W"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Area of interest","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bH0MizeY0L"}],"identifier":"area-of-interest","label":"Area of interest","html_id":"area-of-interest","implicit":true,"key":"rJGDEDPH7C"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Upload data for selected area and verify what variables are provided. In this case uplaod data for Africa. List of available variables should be returend.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"BPeuHDbenh"}],"key":"EHCQP4rti4"}],"key":"vU4wRrfhg7"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"africa_bbox = [-20,     # West\n                -40,    # South\n                60,     # East\n                40]     #North\n\nafrica_dt = xr.open_zarr(url).sel(lon=slice(africa_bbox[0], \n                                            africa_bbox[2]), \n                                lat=slice(africa_bbox[3], \n                                            africa_bbox[1]),\n                                                         )\n\nlist(africa_dt.keys())","visibility":"show","key":"S40i2vYWIE"},{"type":"output","id":"jH4TBo5LngA2yxmO-1qu9","data":[{"output_type":"execute_result","execution_count":4,"metadata":{},"data":{"text/plain":{"content":"['2d', '2t', 'sp']","content_type":"text/plain"}}}],"visibility":"show","key":"Nid6Dj5rwe"}],"visibility":"show","key":"WxTqidQoqJ"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot map of air temperature for Africa.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"STYF8ycvKz"}],"key":"TaPYY7bPqB"}],"key":"GCpjurqI2U"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"lon = africa_dt['lon']\nlat = africa_dt['lat']\ntemperature = africa_dt['2t'][0, 0] - 273.15 # Conversion to Celcius degrees\n\nplt.figure(figsize=(10, 6))\nplt.pcolormesh(lon, lat, temperature, cmap='coolwarm')\nplt.colorbar(label='Temperature (°C)')\nplt.title('Temperature Map')\nplt.xlabel('Longitude')\nplt.ylabel('Latitude')","visibility":"show","key":"n10CqGoXR8"},{"type":"output","id":"4dMJiKVsigBUxy-GzRDtH","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"25594f9b3cb66793800b1d9b0a416d34","path":"/build/25594f9b3cb66793800b1d9b0a416d34.png"},"text/plain":{"content":"<Figure size 1000x600 with 2 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"mQprrVW0Hx"}],"visibility":"show","key":"AKiV30bcZV"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Get data for specific time range","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"vu8GtGGQ0Z"}],"identifier":"get-data-for-specific-time-range","label":"Get data for specific time range","html_id":"get-data-for-specific-time-range","implicit":true,"key":"BehDHz0fmT"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Get data from 10st of April to 11th of April.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"g9cDV31TAL"}],"key":"MfVvXH01BJ"}],"key":"bejTvWBm2X"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"africa_bbox = [-20,     # West\n                -40,    # South\n                60,     # East\n                40]     #North\n\nafrica_dt = xr.open_zarr(url).sel(lon=slice(africa_bbox[0], \n                                            africa_bbox[2]), \n                                lat=slice(africa_bbox[3], \n                                            africa_bbox[1]),\n                                time=slice('20240410T000000', '20240411T000000')\n                                                         )\n\nprint(africa_dt.time)","visibility":"show","key":"AEt6rjekJn"},{"type":"output","id":"oesV9ZtYDDZ_yWJ5yR1L_","data":[{"name":"stdout","output_type":"stream","text":"<xarray.DataArray 'time' (time: 25)>\narray(['2024-04-10T00:00:00.000000000', '2024-04-10T01:00:00.000000000',\n       '2024-04-10T02:00:00.000000000', '2024-04-10T03:00:00.000000000',\n       '2024-04-10T04:00:00.000000000', '2024-04-10T05:00:00.000000000',\n       '2024-04-10T06:00:00.000000000', '2024-04-10T07:00:00.000000000',\n       '2024-04-10T08:00:00.000000000', '2024-04-10T09:00:00.000000000',\n       '2024-04-10T10:00:00.000000000', '2024-04-10T11:00:00.000000000',\n       '2024-04-10T12:00:00.000000000', '2024-04-10T13:00:00.000000000',\n       '2024-04-10T14:00:00.000000000', '2024-04-10T15:00:00.000000000',\n       '2024-04-10T16:00:00.000000000', '2024-04-10T17:00:00.000000000',\n       '2024-04-10T18:00:00.000000000', '2024-04-10T19:00:00.000000000',\n       '2024-04-10T20:00:00.000000000', '2024-04-10T21:00:00.000000000',\n       '2024-04-10T22:00:00.000000000', '2024-04-10T23:00:00.000000000',\n       '2024-04-11T00:00:00.000000000'], dtype='datetime64[ns]')\nCoordinates:\n  * time     (time) datetime64[ns] 2024-04-10 2024-04-10T01:00:00 ... 2024-04-11\nAttributes:\n    axis:           T\n    standard_name:  time\n"}],"visibility":"show","key":"pcFVzOuMNF"}],"visibility":"show","key":"yefh1GU7b3"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Obtain data for specific variable and time","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"IfMX6ccx43"}],"identifier":"obtain-data-for-specific-variable-and-time","label":"Obtain data for specific variable and time","html_id":"obtain-data-for-specific-variable-and-time","implicit":true,"key":"OFRNsUE80o"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Obtain surface pressure data from 10th of April to 11th of April.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"cwfJDdkFyZ"}],"key":"hDeNqi6XL3"}],"key":"bkM28NnwTM"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"africa_bbox = [-20,     # West\n                -40,    # South\n                60,     # East\n                40]     #North\n\nafrica_dt = xr.open_zarr(url)['sp'].sel(lon=slice(africa_bbox[0], \n                                            africa_bbox[2]), \n                                lat=slice(africa_bbox[3], \n                                            africa_bbox[1]),\n                                time=slice('20240410T000000', '20240411T000000')\n                                                         )\n\nprint(africa_dt.var)","visibility":"show","key":"bHImfUV19t"},{"type":"output","id":"yN-J36UZszObmIjmCVXuP","data":[{"name":"stdout","output_type":"stream","text":"<bound method DataArrayAggregations.var of <xarray.DataArray 'sp' (time: 25, lat: 2276, lon: 2279)>\ndask.array<getitem, shape=(25, 2276, 2279), dtype=float32, chunksize=(25, 417, 837), chunktype=numpy.ndarray>\nCoordinates:\n  * lat      (lat) float64 39.99 39.95 39.92 39.88 ... -39.92 -39.95 -39.99\n  * lon      (lon) float64 -19.97 -19.94 -19.9 -19.87 ... 59.92 59.95 59.99\n  * time     (time) datetime64[ns] 2024-04-10 2024-04-10T01:00:00 ... 2024-04-11\nAttributes:\n    CDI_grid_num_LPE:  2560\n    CDI_grid_type:     gaussian\n    long_name:         Surface pressure\n    param:             0.3.0\n    standard_name:     surface_air_pressure\n    units:             Pa>\n"}],"visibility":"show","key":"CXtA3Q6yuZ"}],"visibility":"show","key":"MQiWPB86q5"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot map of surface pressure over Africa.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KVI0gnElUa"}],"key":"PYs57Uz84W"}],"key":"qiT0WVidTA"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"lon = africa_dt['lon']\nlat = africa_dt['lat']\ntemperature = africa_dt[0] / 100    # Conversion to hectoPascals\n\nplt.figure(figsize=(10, 6))\nplt.pcolormesh(lon, lat, temperature, cmap='viridis')\nplt.colorbar(label='Surface Pressure (hPa)')\nplt.title('Surface pressure Map')\nplt.xlabel('Longitude')\nplt.ylabel('Latitude')","visibility":"show","key":"JdBxeu0uDf"},{"type":"output","id":"wb8kDBifSuiYr7iVQnf6C","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"57d5b6f621ee4b704d66932aa12f16a7","path":"/build/57d5b6f621ee4b704d66932aa12f16a7.png"},"text/plain":{"content":"<Figure size 1000x600 with 2 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"PdggfbUune"}],"visibility":"show","key":"FNV2Tk7mhe"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Time series","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"bcrq2YrcVc"}],"identifier":"time-series","label":"Time series","html_id":"time-series","implicit":true,"key":"H8VZyy0udh"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Verify if it is possible to create time series chart (for 96 hours) from DT output - air temperature over Nairobi.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"IE9FVgcaho"}],"key":"HL6rPaYSPk"}],"key":"guAoI0u3HY"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"africa_bbox = [-20,     # West\n                -40,    # South\n                60,     # East\n                40]     #North\n\nafrica_dt = xr.open_zarr(url).sel(lon=slice(africa_bbox[0], \n                                            africa_bbox[2]), \n                                lat=slice(africa_bbox[3], \n                                            africa_bbox[1]),\n                                )\n                                                    ","visibility":"show","key":"lE3qUE84aV"},{"type":"output","id":"joEegtmC1CKJr6mIgRlax","data":[],"visibility":"show","key":"kBAOEhwkTx"}],"visibility":"show","key":"zFrHUodUf3"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Create a chart.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"WNUjaefYz5"}],"key":"S4JmG8yfbH"}],"key":"QdmBoQMyb1"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Define Nairobi coordinates\nnairobi_lat = -1.286389\nnairobi_lon = 36.817223\n\nlat = africa_dt['lat']\nlon = africa_dt['lon']\nnearest_lat_idx = np.abs(lat - nairobi_lat).argmin()\nnearest_lon_idx = np.abs(lon - nairobi_lon).argmin()\n\ntemperature_nairobi = africa_dt['2t'][:, :, nearest_lat_idx, nearest_lon_idx] - 273.15\ntime_values = africa_dt.time.values\n\nplt.figure(figsize=(10, 6))\nplt.plot(time_values, temperature_nairobi, marker='o', color='b')\nplt.title('Air Temperature Time Series for Nairobi')\nplt.xlabel('Time')\nplt.ylabel('Temperature (°C)')\nplt.grid(True)\nplt.show()\n","visibility":"show","key":"TgijDj5Unt"},{"type":"output","id":"2l1X18V2_4u2gGUkeoZhx","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"b61bf0f02adcece2bde436c11b668e6a","path":"/build/b61bf0f02adcece2bde436c11b668e6a.png"},"text/plain":{"content":"<Figure size 1000x600 with 1 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"zhmAieIKae"}],"visibility":"show","key":"yGzudpFSPc"}],"key":"sic7x6JaIc"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"STACK service - Dask 101","url":"/stack-dask-101","group":"STACK"},"next":{"title":"Create a dashboard based on Data Cube populated with data obtained from Weather and Geophysical Extremes Digital Twin (DT) - ExtremeDT","url":"/extremedt-datacube-xviewer","group":"STACK"}}},"domain":"http://localhost:3001"}