{"version":"1","records":[{"hierarchy":{"lvl1":"Hook Service"},"type":"lvl1","url":"/","position":0},{"hierarchy":{"lvl1":"Hook Service"},"content":"","type":"content","url":"/","position":1},{"hierarchy":{"lvl1":"Hook Service"},"type":"lvl1","url":"/#hook-service","position":2},{"hierarchy":{"lvl1":"Hook Service"},"content":" Author: EUMETSAT\n\n\nThis folder contains materials for learning how to use Hook Service.\n\nThe Destination Earth Data Lake (DEDL) ‘Hook service’ provides ready-to-use high level serverless workflows and functions preconfigured to efficiently access and manipulate Destination Earth Data Lake (DEDL) data. A growing number of workflows and functions will provide on-demand capabilities for the diverse data analysis needs.","type":"content","url":"/#hook-service","position":3},{"hierarchy":{"lvl1":"Hook Service","lvl2":"Notebooks"},"type":"lvl2","url":"/#notebooks","position":4},{"hierarchy":{"lvl1":"Hook Service","lvl2":"Notebooks"},"content":"","type":"content","url":"/#notebooks","position":5},{"hierarchy":{"lvl1":"Hook Service","lvl3":"Tutorial: How to discover available workflows and run one example (data-harvest workflow)","lvl2":"Notebooks"},"type":"lvl3","url":"/#tutorial-how-to-discover-available-workflows-and-run-one-example-data-harvest-workflow","position":6},{"hierarchy":{"lvl1":"Hook Service","lvl3":"Tutorial: How to discover available workflows and run one example (data-harvest workflow)","lvl2":"Notebooks"},"content":"#The Tutorial.ipynb is executeable as-is, but parameters can be provided from a file .env_tutorial\n#To provide environment parameters from file\n\n# 1. create a file called .env_tutorial in the same folder as the notebook\n# 2. paste in the following contents\n# 3. execute the Tutorial.ipynb notebook which should now pick up the environment variables from file\n\n########## SET HOOK_ORDER_NAME ##########\n# This will be added to the order name. e.g. replace XXXX with your name\n\nHOOK_ORDER_NAME=XXXX-20250212-1\n\n########## SET WORKFLOW, COLLECTION_ID and DATA_ID ##########\n# Uncomment HOOK_WORKFLOW (to identify the HOOK to execute)\n# Uncomment HOOK_COLLECTION_ID (to identify the DEDL Collection where the data comes from)\n# Uncomment HOOK_DATA_ID (to identify the data that is input to the HOOK)\n# Uncomment HOOK_SOURCE_TYPE (to identify the source_type of the HOOK. Possible values are DESP, EXTERNAL...)\n\n# DEDL HDA input possible\n\n#HOOK_WORKFLOW=card_bs\n#HOOK_COLLECTION_ID=EO.ESA.DAT.SENTINEL-1.L1_GRD\n#HOOK_DATA_ID=S1A_IW_GRDH_1SDV_20230910T054256_20230910T054321_050261_060CD9_BF21.SAFE\n#HOOK_SOURCE_TYPE=DESP\n\n#HOOK_WORKFLOW=lai\n#HOOK_COLLECTION_ID=EO.ESA.DAT.SENTINEL-2.MSI.L2A\n#HOOK_DATA_ID=S2A_MSIL2A_20230906T102601_N0509_R108_T32UMA_20230906T164400.SAFE\n#HOOK_SOURCE_TYPE=DESP\n\n# INPUT PRODUCT TYPES: SLC, S1_SLC__1S, S2_SLC__1S, S3_SLC__1S, S4_SLC__1S, S5_SLC__1S, S6_SLC__1S, IW_SLC__1S, EW_SLC__1S, WV_SLC__1S\n#HOOK_WORKFLOW=card_cohinf\n#HOOK_COLLECTION_ID=EO.ESA.DAT.SENTINEL-1.L1_SLC\n#HOOK_DATA_ID=S1A_IW_SLC__1SDV_20240121T155314_20240121T155341_052207_064FA6_3AB9\n#HOOK_ADDITIONAL1=\"NAME=card_producttype;VALUE=CARD_COH;VALUE_TYPE=str\"\n#HOOK_DATA_ID=S1A_IW_SLC__1SDV_20230930T172417_20230930T172444_050560_06170F_59DF\n#HOOK_ADDITIONAL1=\"NAME=card_producttype;VALUE=CARD_INF;VALUE_TYPE=str\"\n#HOOK_ADDITIONAL2=\"NAME=timespan;VALUE=24;VALUE_TYPE=int\"\n#HOOK_SOURCE_TYPE=DESP\n\n#HOOK_WORKFLOW=c2rcc\n#HOOK_COLLECTION_ID=EO.ESA.DAT.SENTINEL-2.MSI.L1C\n#HOOK_DATA_ID=S2B_MSIL1C_20231001T102739_N0509_R108_T31TGL_20231001T123227\n#HOOK_SOURCE_TYPE=DESP\n\nHOOK_WORKFLOW=data-harvest\nHOOK_COLLECTION_ID=EO.ESA.DAT.SENTINEL-2.MSI.L1C\nHOOK_DATA_ID=S2A_MSIL1C_20230910T050701_N0509_R019_T47VLH_20230910T074321.SAFE\nHOOK_SOURCE_TYPE=DESP\n#HOOK_SOURCE_TYPE=EXTERNAL\n#HOOK_EXTERNAL_TOKEN_URL=https://identity.XXXX/auth/realms/XXXX/protocol/openid-connect/token\n#HOOK_EXTERNAL_CLIENT_ID=hda_public\n#HOOK_EXTERNAL_USERNAME=\n#HOOK_EXTERNAL_PASSWORD=\n\n#HOOK_WORKFLOW=sen2cor\n#HOOK_COLLECTION_ID=EO.ESA.DAT.SENTINEL-2.MSI.L1C\n#HOOK_DATA_ID=S2B_MSIL1C_20231001T102739_N0509_R108_T32TMS_20231001T123227\n#HOOK_SOURCE_TYPE=DESP\n\n##### DEDL HDA input NOT possible at the moment. i.e. source_type is not DESP nor EXTERNAL #####\n# These HOOKs have specific configuration. See below\n\n# Accesses Creodias Catalogue in the background\n#HOOK_WORKFLOW=copdem\n#HOOK_COLLECTION_ID=\n#HOOK_DATA_ID=S3A_SL_1_RBT____20161110T022134_20161110T022434_20181003T070309_0179_010_374______LR1_R_NT_003.SEN3\n#HOOK_SOURCE_TYPE=\n\n# Accesses Creodias Catalogue in the background\n#HOOK_WORKFLOW=maja\n#HOOK_COLLECTION_ID=\n#HOOK_DATA_ID=S2B_MSIL1C_20220429T102549_N0400_R108_T31UGQ_20220429T124017.SAFE\n#HOOK_SOURCE_TYPE=\n#HOOK_ADDITIONAL1=\"NAME=input_type;VALUE=TIMESPAN;VALUE_TYPE=str\"\n#HOOK_ADDITIONAL2=\"NAME=timeseries_end_id;VALUE=S2B_MSIL1C_20220429T102549_N0400_R108_T31UGQ_20220429T124017.SAFE;VALUE_TYPE=str\"\n#HOOK_ADDITIONAL3=\"NAME=timespan;VALUE=18;VALUE_TYPE=int\"\n\n\n########## START : Example Triggering CUSTOM HOOOK - dedl_hello_world ##########\n\n# # This 'Custom Hook' demonstrator expects a file called 'example.data' in the 'source_s3_path' bucket/folder (of the configured source_s3_endpoint)\n# # The text contents of example.data will be converted to Upper Case and output to Private or Temporary Storage\n\n# HOOK_WORKFLOW=dedl_hello_world\n\n# # Needs to be empty\n# HOOK_COLLECTION_ID=\n\n# # This normally contains the ID of a product, but for Custom Hooks we will set it to an arbitrary value 'Custom Hook'\n# HOOK_DATA_ID=Custom Hook\n\n# # Needs to be empty\n# HOOK_SOURCE_TYPE=\n\n# # Setting source_s3_path TO s3://XXXX/dedl_hello_world/input_file_location\n# HOOK_ADDITIONAL1=\"NAME=source_s3_path;VALUE=s3://XXXX/dedl_hello_world/input_file_location;VALUE_TYPE=str\"\n# # Setting source_s3_endpoint_url TO https://s3.central.data.destination-earth.eu\n# HOOK_ADDITIONAL2=\"NAME=source_s3_endpoint_url;VALUE=https://s3.central.data.destination-earth.eu;VALUE_TYPE=str\"\n# # Setting source_s3_access_key TO YYYY (change this to your access_key)\n# HOOK_ADDITIONAL3=\"NAME=source_s3_access_key;VALUE=YYYY;VALUE_TYPE=str\"\n# # Setting source_s3_secret_key TO ZZZZ (change this to your access_key)\n# HOOK_ADDITIONAL4=\"NAME=source_s3_secret_key;VALUE=ZZZZ;VALUE_TYPE=str\"\n\n########## END : Example Triggering CUSTOM HOOOK - dedl_hello_world ##########\n\n########## SET STORAGE OPTION ##########\n# If you set HOOK_IS_PRIVATE_STORAGE to True you will need to set the bucket name, access key, and secret key\nHOOK_IS_PRIVATE_STORAGE=False\n#HOOK_OUTPUT_BUCKET=your_bucket-name\n#HOOK_OUTPUT_STORAGE_ACCESS_KEY=your_access_key\n#HOOK_OUTPUT_STORAGE_SECRET_KEY=your_secret_key\n","type":"content","url":"/#tutorial-how-to-discover-available-workflows-and-run-one-example-data-harvest-workflow","position":7},{"hierarchy":{"lvl1":"Hook Service","lvl3":"DEDL​-Hook​_access​.ipynb: Simple retrieval of token and listing of workflows","lvl2":"Notebooks"},"type":"lvl3","url":"/#dedl-hook-access-ipynb-simple-retrieval-of-token-and-listing-of-workflows","position":8},{"hierarchy":{"lvl1":"Hook Service","lvl3":"DEDL​-Hook​_access​.ipynb: Simple retrieval of token and listing of workflows","lvl2":"Notebooks"},"content":"Launch this noteboook with your DESP credentials and retrieve a token you can use to interact with OnDemand Processing API (Hook API)","type":"content","url":"/#dedl-hook-access-ipynb-simple-retrieval-of-token-and-listing-of-workflows","position":9},{"hierarchy":{"lvl1":"Hook Service","lvl2":"Further Information"},"type":"lvl2","url":"/#further-information","position":10},{"hierarchy":{"lvl1":"Hook Service","lvl2":"Further Information"},"content":"Further information available in DestinE Data Lake documentation: \n\nhttps://​destine​-data​-lake​-docs​.data​.destination​-earth​.eu​/en​/latest​/index​.html\n\nAdditional ressources:\nDestinE Data Portfolio: \n\nhttps://​hda​.data​.destination​-earth​.eu​/ui​/catalog\nDataLake Priority services: \n\nhttps://​hda​.data​.destination​-earth​.eu​/ui​/services\nHDA SWAGGER UI: \n\nhttps://​hda​.data​.destination​-earth​.eu​/docs/","type":"content","url":"/#further-information","position":11},{"hierarchy":{"lvl1":"DestinE-DataLake-Lab"},"type":"lvl1","url":"/","position":0},{"hierarchy":{"lvl1":"DestinE-DataLake-Lab"},"content":"","type":"content","url":"/","position":1},{"hierarchy":{"lvl1":"DestinE-DataLake-Lab"},"type":"lvl1","url":"/#destine-datalake-lab","position":2},{"hierarchy":{"lvl1":"DestinE-DataLake-Lab"},"content":" Author: EUMETSAT\n\n\nDestination Earth Data Lake Laboratory, which contains additional information for working with DestinE Data Lake services:\n\nHarmonised Data Access (Juypter notebooks examples + Python Tools)\n\nSTACK service (Juypter Notebook examples on how to use DASK for near data processing)\n\nHOOK service (Juypter Notebook examples on how to use HOOK for workflows)\n\nFurther information available in DestinE Data Lake documentation: \n\nhttps://​destine​-data​-lake​-docs​.data​.destination​-earth​.eu​/en​/latest​/index​.html\n\nAdditional ressources:\n\nDestinE Data Portfolio: \n\nhttps://​hda​.data​.destination​-earth​.eu​/ui​/catalog\n\nDataLake Priority services: \n\nhttps://​hda​.data​.destination​-earth​.eu​/ui​/services\n\nHDA SWAGGER UI: \n\nhttps://​hda​.data​.destination​-earth​.eu​/docs/\n\nDestinE Platform Insula Service Users\n\nPlease perform the following and select my_env kernel when running the provided Notebooks\n\nOpen a terminal window (File, New, Terminal) and run the following commands in sequence:\n\nCreate a virtual environment: python -m venv /home/jovyan/my_env\n\nActivate it: source /home/jovyan/my_env/bin/activate\n\nInstall required dependencies for this example Notebooks: pip install -r /home/jovyan/datalake-lab/requirements.txt\n\nVerify the installation: pip list | grep destinelab\n\nThis should give:\n\ndestinelab         0.9\n\nInstall kernel my_env. Run the command: python -m ipykernel install --name my_env --user\n\nSelect the kernel my_env from the top-right menu of these notebooks.\n\nUsers who already have a previous version of the ‘my_env’ environment installed, should delete the kernel before running the steps above. To delete the my_env kernel please run the following command: ‘jupyter kernelspec uninstall my_env’ from a terminal window.","type":"content","url":"/#destine-datalake-lab","position":3}]}