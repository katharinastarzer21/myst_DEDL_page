{"version":2,"kind":"Notebook","sha256":"bb90703121ff6f693d48ed8f1dc9a2dfae540ec12787b592c28b2eae0a1d16ec","slug":"extremedt-datacube","location":"/STACK/ExtremeDT-DataCube.ipynb","dependencies":[],"frontmatter":{"title":"Data Cube populated with data obtained from Weather and Geophysical Extremes Digital Twin (DT) - ExtremeDT","content_includes_title":true,"kernelspec":{"name":"python_dedl","display_name":"Python DEDL","language":"python"},"numbering":{"title":{"offset":2}},"thumbnail":"/b27bd30f978ddf0848f3ea0942070886.jpeg","exports":[{"format":"ipynb","filename":"ExtremeDT-DataCube.ipynb","url":"/ExtremeDT-DataCube-339acf202fdbe5b03aaa56f26fa1932a.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"image","url":"/b27bd30f978ddf0848f3ea0942070886.jpeg","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HIUewBmhrC","urlSource":"https://github.com/destination-earth/DestinE-DataLake-Lab/blob/main/img/DestinE-banner.jpg?raw=true"}],"key":"e4xJ5VmCN1"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Licence","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"YMSgmV9eiW"}],"key":"fXmAhFI19l"},{"type":"text","value":": MIT ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Nffs7CYQcI"},{"type":"break","key":"SAZ7Thoe39"}],"key":"qIApz1tKVX"},{"type":"heading","depth":1,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Data Cube populated with data obtained from Weather and Geophysical Extremes Digital Twin (DT) - ExtremeDT","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"KALjD3JIYz"}],"identifier":"data-cube-populated-with-data-obtained-from-weather-and-geophysical-extremes-digital-twin-dt-extremedt","label":"Data Cube populated with data obtained from Weather and Geophysical Extremes Digital Twin (DT) - ExtremeDT","html_id":"data-cube-populated-with-data-obtained-from-weather-and-geophysical-extremes-digital-twin-dt-extremedt","implicit":true,"key":"LwGJpP9dKd"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"This notebook covers:","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"IRGTrfP92A"}],"key":"hdSBKpvJDu"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":6,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"find available data cubes and their urls","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"KtLzNA0RJe"}],"key":"Lc62iouq5I"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"upload data cube","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"jHBJifYYXk"}],"key":"B3qgAfFnNA"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"plot map for desired area, time and variable","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"cVgrIWMq3V"}],"key":"BKw8KCucni"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"plot time series chart for selected variable in specifc time for specific location","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"ITi5AGfmqF"}],"key":"zBl3HIk9Ys"},{"type":"listItem","spread":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"create interactive dashboard using xcube - xviewer","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"JCrUAUnF7q"}],"key":"qhSXO3EEvj"}],"key":"YEznF9x3Nw"}],"key":"KPOwMMPNAL"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Prepre your environment","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GxJQXvZAj5"}],"identifier":"prepre-your-environment","label":"Prepre your environment","html_id":"prepre-your-environment","implicit":true,"key":"EcLBcmaiYA"}],"key":"ySgMntjbLX"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"import xarray as xr\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport dask\nimport requests","visibility":"show","key":"ruuUx4Xtq8"},{"type":"output","id":"iPPkV0IHGXMyH_yWd37iJ","data":[],"visibility":"show","key":"S7NbjN64yq"}],"visibility":"show","key":"Zcx1wSUBT5"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Connect with Extreme DT data cube","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"FVL16Tuc0t"}],"identifier":"connect-with-extreme-dt-data-cube","label":"Connect with Extreme DT data cube","html_id":"connect-with-extreme-dt-data-cube","implicit":true,"key":"kr0YQGpL7R"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"strong","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"The data cube provides data:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"D07F0DD4nL"}],"key":"bERcvKfNWH"}],"key":"XAzFcoo9jp"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Four variables","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"VEgnN5TMkx"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"2t - Air temperature at 2 meters above grond [K]","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"VCTzVCkhsn"}],"key":"Sk4J6Qgj02"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"2d - Dew point temperature at 2 meters above grond [K]","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"KU4L8Qv6ej"}],"key":"dSqWb8Y2Jn"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"sp - Surface pressure [Pa]","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"nFLVVssyc1"}],"key":"q6iaqZLm5Q"}],"key":"i1YY3jOBNT"}],"key":"ABqVktQxnG"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Forecast from 10.04.2024 + 96 hours","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"uSS5jpowyD"}],"key":"aQNg78oQ29"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Hourly step","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"Uvo43gY1Ru"}],"key":"quxUyyo7hs"},{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"World","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"OxfHmjWEqs"}],"key":"Ave9KWtwL4"}],"key":"nCH4uX3OOQ"}],"key":"gUfGtEjvnv"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Select proper data cube","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"K3zO5GVD4l"}],"identifier":"select-proper-data-cube","label":"Select proper data cube","html_id":"select-proper-data-cube","implicit":true,"key":"ZuVqrrjN0y"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Data cubes on s3 bucket are stored under URL ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"wkDLvtucQr"},{"type":"link","url":"https://s3.central.data.destination-earth.eu/swift/v1/dedl_datacube","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"https://​s3​.central​.data​.destination​-earth​.eu​/swift​/v1​/dedl​_datacube","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"KJxNhdgtNR"}],"urlSource":"https://s3.central.data.destination-earth.eu/swift/v1/dedl_datacube","key":"YBeeHBfz9n"},{"type":"text","value":".","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"E0f82b8BJL"},{"type":"break","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"gqnaFufhLl"},{"type":"text","value":"Data cubes are stored in two directories:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"J8mLLtCNG0"}],"key":"fFcbWX1irp"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"ExtremeDT - the newest one","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"v9RruGjBCl"}],"key":"sJ6N10yoNH"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"archive - from prievous days","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"eljiQB3eoW"}],"key":"IfOBzNgKVh"}],"key":"HLztuhbVfK"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"strong","children":[{"type":"text","value":"File nameing convention:","key":"C8Zk0sz3fc"}],"key":"vo4E2yNObO"},{"type":"break","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"XtAEk50HxU"},{"type":"text","value":"dt_extreme_YYYYMMDD.zarr/","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"UuZmgcYumO"},{"type":"break","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"FgEMWn6uYT"},{"type":"text","value":"YYYYMMDD - is the date when forecast starts (step 0)","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"sVZTtK5xJV"}],"key":"f0eSI9MmYN"},{"type":"paragraph","position":{"start":{"line":11,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"strong","children":[{"type":"text","value":"Results","key":"ysdZGole5b"}],"key":"GnCHoceB0j"},{"type":"break","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"dhFY18ntCJ"},{"type":"text","value":"After exectution of code below, the list of urls linked to available cubes will be printed.","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"r0BI5GWmPq"}],"key":"x878B0gGGm"}],"key":"Icstavr5PF"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# URL to s3 where  ExtremeDT data cubes are stored\ndatacube_url = 'https://s3.central.data.destination-earth.eu/swift/v1/dedl_datacube'\nresponse = requests.get(datacube_url)\n\nif response.status_code == 200:\n    lines = response.text.splitlines()\n    zarr_items = [line for line in lines if line.endswith(\".zarr\") or line.endswith(\".zarr/\")]\n    if zarr_items:\n        for item in zarr_items:\n            print(item)\n            new_url = f\"{datacube_url}/{item}\"\n            print(\"New URL:\", new_url)\n    else:\n        print(\"No .zarr files or directories found.\")\nelse:\n    print(\"Failed to fetch contents. Status code:\", response.status_code)\n","visibility":"show","key":"rShVGn14fU"},{"type":"output","id":"0ddXh16fJIPc9SOPaXUqT","data":[{"name":"stdout","output_type":"stream","text":"ExtremeDT/dt_extreme_20240410.zarr/\nNew URL: https://s3.central.data.destination-earth.eu/swift/v1/dedl_datacube/ExtremeDT/dt_extreme_20240410.zarr/\narchive/dt_extreme_20240409.zarr/\nNew URL: https://s3.central.data.destination-earth.eu/swift/v1/dedl_datacube/archive/dt_extreme_20240409.zarr/\n"}],"visibility":"show","key":"EhbttKIhKg"}],"visibility":"show","key":"RGg6ZMsNHE"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Get info about the newset data cube.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lEA953oVGt"}],"key":"VDYaRvTuSg"}],"key":"ywdsEOQKB9"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Paste into url variable link to the newest data cube\nurl = 'https://s3.central.data.destination-earth.eu/swift/v1/dedl_datacube/ExtremeDT/dt_extreme_20240410.zarr/'","visibility":"show","key":"KY5tkgHMXx"},{"type":"output","id":"T139y_seO8cv7Sj-6YVV8","data":[],"visibility":"show","key":"aNRkkTCFbc"}],"visibility":"show","key":"umISt31uBJ"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Let’s make some test","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"v7X2ii6US5"}],"identifier":"lets-make-some-test","label":"Let’s make some test","html_id":"lets-make-some-test","implicit":true,"key":"AeksaJkgrZ"}],"key":"PQE5r3nUbg"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Area of interest","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TQkJ99aSlt"}],"identifier":"area-of-interest","label":"Area of interest","html_id":"area-of-interest","implicit":true,"key":"pd5L25WKGM"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Upload data for selected area and verify what variables are provided. In this case uplaod data for Africa. List of available variables should be returend.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"r5fn3OzyEV"}],"key":"rcngtL8gjl"}],"key":"pVi6xTKft4"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"africa_bbox = [-20,     # West\n                -40,    # South\n                60,     # East\n                40]     #North\n\nafrica_dt = xr.open_zarr(url).sel(lon=slice(africa_bbox[0], \n                                            africa_bbox[2]), \n                                lat=slice(africa_bbox[3], \n                                            africa_bbox[1]),\n                                                         )\n\nlist(africa_dt.keys())","visibility":"show","key":"g750gu6CDd"},{"type":"output","id":"xm4E-vvTEOTFW7PtopjPw","data":[{"output_type":"execute_result","execution_count":4,"metadata":{},"data":{"text/plain":{"content":"['2d', '2t', 'sp']","content_type":"text/plain"}}}],"visibility":"show","key":"EkpGdDUD7S"}],"visibility":"show","key":"YwXDc1pV0F"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot map of air temperature for Africa.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rVwupXh2Ft"}],"key":"zr3rbNJI2H"}],"key":"BElGKcHIIW"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"lon = africa_dt['lon']\nlat = africa_dt['lat']\ntemperature = africa_dt['2t'][0, 0] - 273.15 # Conversion to Celcius degrees\n\nplt.figure(figsize=(10, 6))\nplt.pcolormesh(lon, lat, temperature, cmap='coolwarm')\nplt.colorbar(label='Temperature (°C)')\nplt.title('Temperature Map')\nplt.xlabel('Longitude')\nplt.ylabel('Latitude')","visibility":"show","key":"X0eQG7ioaA"},{"type":"output","id":"RPeIqxkcH7wH2z5X6Yit9","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"25594f9b3cb66793800b1d9b0a416d34","path":"/25594f9b3cb66793800b1d9b0a416d34.png"},"text/plain":{"content":"<Figure size 1000x600 with 2 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"M7YcGsnmYi"}],"visibility":"show","key":"b7kyRVuUrm"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Get data for specific time range","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GZwvM76kNC"}],"identifier":"get-data-for-specific-time-range","label":"Get data for specific time range","html_id":"get-data-for-specific-time-range","implicit":true,"key":"L6OaMlTwsU"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Get data from 10st of April to 11th of April.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"ipyeNtEdnN"}],"key":"J42RxVkhmI"}],"key":"t2T1JtiFkT"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"africa_bbox = [-20,     # West\n                -40,    # South\n                60,     # East\n                40]     #North\n\nafrica_dt = xr.open_zarr(url).sel(lon=slice(africa_bbox[0], \n                                            africa_bbox[2]), \n                                lat=slice(africa_bbox[3], \n                                            africa_bbox[1]),\n                                time=slice('20240410T000000', '20240411T000000')\n                                                         )\n\nprint(africa_dt.time)","visibility":"show","key":"gNJighr9ix"},{"type":"output","id":"_AUUhTgmTg8TzHEaFmaD1","data":[{"name":"stdout","output_type":"stream","text":"<xarray.DataArray 'time' (time: 25)>\narray(['2024-04-10T00:00:00.000000000', '2024-04-10T01:00:00.000000000',\n       '2024-04-10T02:00:00.000000000', '2024-04-10T03:00:00.000000000',\n       '2024-04-10T04:00:00.000000000', '2024-04-10T05:00:00.000000000',\n       '2024-04-10T06:00:00.000000000', '2024-04-10T07:00:00.000000000',\n       '2024-04-10T08:00:00.000000000', '2024-04-10T09:00:00.000000000',\n       '2024-04-10T10:00:00.000000000', '2024-04-10T11:00:00.000000000',\n       '2024-04-10T12:00:00.000000000', '2024-04-10T13:00:00.000000000',\n       '2024-04-10T14:00:00.000000000', '2024-04-10T15:00:00.000000000',\n       '2024-04-10T16:00:00.000000000', '2024-04-10T17:00:00.000000000',\n       '2024-04-10T18:00:00.000000000', '2024-04-10T19:00:00.000000000',\n       '2024-04-10T20:00:00.000000000', '2024-04-10T21:00:00.000000000',\n       '2024-04-10T22:00:00.000000000', '2024-04-10T23:00:00.000000000',\n       '2024-04-11T00:00:00.000000000'], dtype='datetime64[ns]')\nCoordinates:\n  * time     (time) datetime64[ns] 2024-04-10 2024-04-10T01:00:00 ... 2024-04-11\nAttributes:\n    axis:           T\n    standard_name:  time\n"}],"visibility":"show","key":"eqszJB5zPv"}],"visibility":"show","key":"qamObQE3sT"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Obtain data for specific variable and time","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"yt0Q4hNQi7"}],"identifier":"obtain-data-for-specific-variable-and-time","label":"Obtain data for specific variable and time","html_id":"obtain-data-for-specific-variable-and-time","implicit":true,"key":"i4pfvAq4DJ"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Obtain surface pressure data from 10th of April to 11th of April.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"qyzJZqISEG"}],"key":"VwEOkeGTUm"}],"key":"kDT0zC0Ch0"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"africa_bbox = [-20,     # West\n                -40,    # South\n                60,     # East\n                40]     #North\n\nafrica_dt = xr.open_zarr(url)['sp'].sel(lon=slice(africa_bbox[0], \n                                            africa_bbox[2]), \n                                lat=slice(africa_bbox[3], \n                                            africa_bbox[1]),\n                                time=slice('20240410T000000', '20240411T000000')\n                                                         )\n\nprint(africa_dt.var)","visibility":"show","key":"FoPUvRuxQ4"},{"type":"output","id":"EbE3DTsHfTiWUiGB1nJg3","data":[{"name":"stdout","output_type":"stream","text":"<bound method DataArrayAggregations.var of <xarray.DataArray 'sp' (time: 25, lat: 2276, lon: 2279)>\ndask.array<getitem, shape=(25, 2276, 2279), dtype=float32, chunksize=(25, 417, 837), chunktype=numpy.ndarray>\nCoordinates:\n  * lat      (lat) float64 39.99 39.95 39.92 39.88 ... -39.92 -39.95 -39.99\n  * lon      (lon) float64 -19.97 -19.94 -19.9 -19.87 ... 59.92 59.95 59.99\n  * time     (time) datetime64[ns] 2024-04-10 2024-04-10T01:00:00 ... 2024-04-11\nAttributes:\n    CDI_grid_num_LPE:  2560\n    CDI_grid_type:     gaussian\n    long_name:         Surface pressure\n    param:             0.3.0\n    standard_name:     surface_air_pressure\n    units:             Pa>\n"}],"visibility":"show","key":"s7S0QOSlWS"}],"visibility":"show","key":"Zcuyq7WWOz"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot map of surface pressure over Africa.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"gAnUw4h3PP"}],"key":"CNIVMhuFa2"}],"key":"ieUGiMbCVO"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"lon = africa_dt['lon']\nlat = africa_dt['lat']\ntemperature = africa_dt[0] / 100    # Conversion to hectoPascals\n\nplt.figure(figsize=(10, 6))\nplt.pcolormesh(lon, lat, temperature, cmap='viridis')\nplt.colorbar(label='Surface Pressure (hPa)')\nplt.title('Surface pressure Map')\nplt.xlabel('Longitude')\nplt.ylabel('Latitude')","visibility":"show","key":"Mob9f7C52m"},{"type":"output","id":"utoHKXY4hnX1MZJns1vyO","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"57d5b6f621ee4b704d66932aa12f16a7","path":"/57d5b6f621ee4b704d66932aa12f16a7.png"},"text/plain":{"content":"<Figure size 1000x600 with 2 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"YJv6WsFdWv"}],"visibility":"show","key":"pVs4sFYj93"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Time series","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jtc68FQm5u"}],"identifier":"time-series","label":"Time series","html_id":"time-series","implicit":true,"key":"j8gBOQ0LLa"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Verify if it is possible to create time series chart (for 96 hours) from DT output - air temperature over Nairobi.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"U4a5H6x3Rh"}],"key":"B31fkfC6mr"}],"key":"ee7ldhxAWs"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"africa_bbox = [-20,     # West\n                -40,    # South\n                60,     # East\n                40]     #North\n\nafrica_dt = xr.open_zarr(url).sel(lon=slice(africa_bbox[0], \n                                            africa_bbox[2]), \n                                lat=slice(africa_bbox[3], \n                                            africa_bbox[1]),\n                                )\n                                                    ","visibility":"show","key":"BhI7rAlL9a"},{"type":"output","id":"yDmYYZ8jr8PFXGku42I71","data":[],"visibility":"show","key":"gvIYw2zxI9"}],"visibility":"show","key":"m6Xacobpgh"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Create a chart.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"iiuvCg4K49"}],"key":"CvpckI2m1e"}],"key":"ku0hWMa9WO"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Define Nairobi coordinates\nnairobi_lat = -1.286389\nnairobi_lon = 36.817223\n\nlat = africa_dt['lat']\nlon = africa_dt['lon']\nnearest_lat_idx = np.abs(lat - nairobi_lat).argmin()\nnearest_lon_idx = np.abs(lon - nairobi_lon).argmin()\n\ntemperature_nairobi = africa_dt['2t'][:, :, nearest_lat_idx, nearest_lon_idx] - 273.15\ntime_values = africa_dt.time.values\n\nplt.figure(figsize=(10, 6))\nplt.plot(time_values, temperature_nairobi, marker='o', color='b')\nplt.title('Air Temperature Time Series for Nairobi')\nplt.xlabel('Time')\nplt.ylabel('Temperature (°C)')\nplt.grid(True)\nplt.show()\n","visibility":"show","key":"h3qwAgmmVx"},{"type":"output","id":"m-v0SpMsKutmnL32uFGnR","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"b61bf0f02adcece2bde436c11b668e6a","path":"/b61bf0f02adcece2bde436c11b668e6a.png"},"text/plain":{"content":"<Figure size 1000x600 with 1 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"Vt5TmdcEAl"}],"visibility":"show","key":"Ka2T9c8G9I"}],"key":"KnamvtAxNO"},"references":{"cite":{"order":[],"data":{}}}}